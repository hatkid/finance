<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.finance.dao.BusinessManagementMapper">
    <select id="findById" parameterType="int" resultType="BusinessManagement">
        SELECT * FROM companyinformation WHERE id=#{id,jdbcType=INTEGER}
    </select>
	<select id="searchByPage" resultType="java.util.Map" >
		SELECT * FROM companyinformation
		<where>
			<if test="companyName != null and companyName!=''">
				`companyName` like
				CONCAT('%',#{companyName,jdbcType=VARCHAR},'%')
			</if>
			<if test="companyNature != null and companyNature !=''">
				and `companyNature` like
				CONCAT('%',#{companyNature,jdbcType=VARCHAR},'%')
			</if>
			<if test="legalPersonContact != null and legalPersonContact != ''">
				and `legalPersonContact` like
				CONCAT('%',#{legalPersonContact,jdbcType=VARCHAR},'%')
			</if>
			<if test="address != null and address != ''">
				and `address` like
				CONCAT('%',#{address,jdbcType=VARCHAR},'%')
			</if>
			<if test="realName != null and realName != ''">
				and  `realName` like
				CONCAT('%',#{realName,jdbcType=VARCHAR},'%')
			</if>
			<if test="registeredCapital1 != null and registeredCapital1 != ''">
				and  `registeredCapital` &gt; #{registeredCapital1}
			</if>
			<if test="registeredCapital2 != null and registeredCapital2 != ''">
				and `registeredCapital` &lt; #{registeredCapital2}
			</if>
		</where>
		limit #{start},#{limit}
	</select>
	
	
	<select id="getCount" resultType="long">
		SELECT COUNT(*) FROM `companyinformation`
		<where>
			<if test="companyName != null and companyName!=''">
				`companyName` like
				CONCAT('%',#{companyName,jdbcType=VARCHAR},'%')
			</if>
			<if test="companyNature != null and companyNature !=''">
				and `companyNature` like
				CONCAT('%',#{companyNature,jdbcType=VARCHAR},'%')
			</if>
			<if test="legalPersonContact != null and legalPersonContact != ''">
				and `legalPersonContact` like
				CONCAT('%',#{legalPersonContact,jdbcType=VARCHAR},'%')
			</if>
			<if test="address != null and address != ''">
				and `address` like
				CONCAT('%',#{address,jdbcType=VARCHAR},'%')
			</if>
			<if test="realName != null and realName != ''">
				and  `realName` like
				CONCAT('%',#{realName,jdbcType=VARCHAR},'%')
			</if>
			<if test="registeredCapital1 != null and registeredCapital1 != ''">
				and  `registeredCapital` &gt; #{registeredCapital1}
			</if>
			<if test="registeredCapital2 != null and registeredCapital2 != ''">
				and `registeredCapital` &lt; #{registeredCapital2}
			</if>
		</where>
	</select>
	
	<insert id="insert" parameterType="BusinessManagement" flushCache="true"
		useGeneratedKeys="true" keyProperty="id">
		INSERT INTO
		companyinformation(companyName,companyLegalPerson,companyNature,legalPersonContact,registeredCapital,realName,install,qualifications,address,remarks,imageName,businessScope)
		VALUES(#{companyName},#{companyLegalPerson},#{companyNature},#{legalPersonContact},#{registeredCapital},#{realName},#{install},#{qualifications},#{address},#{remarks},#{imageName},#{businessScope})
	</insert>
	<update id="update" parameterType="BusinessManagement">
		UPDATE companyinformation SET
		companyName=#{companyName},companyLegalPerson=#{companyLegalPerson},companyNature=#{companyNature},legalPersonContact=#{legalPersonContact},registeredCapital=#{registeredCapital},
		realName=#{realName},install=#{install},qualifications=#{qualifications},address=#{address},remarks=#{remarks},imageName=#{imageName},businessScope=#{businessScope}
		WHERE id=#{id}
	</update>
	<delete id="delete" parameterType="int">
		DELETE FROM companyinformation
		WHERE id=#{id,jdbcType=INTEGER}
	</delete>
	
	
	<select id="search" resultType="java.util.Map" >
		SELECT legalPersonContact  FROM companyinformation
		<where>
			<if test="companyName != null and companyName!=''">
				`companyName` like
				CONCAT('%',#{companyName,jdbcType=VARCHAR},'%')
			</if>
			<if test="companyNature != null and companyNature !=''">
				and `companyNature` like
				CONCAT('%',#{companyNature,jdbcType=VARCHAR},'%')
			</if>
			<if test="legalPersonContact != null and legalPersonContact != ''">
				and `legalPersonContact` like
				CONCAT('%',#{legalPersonContact,jdbcType=VARCHAR},'%')
			</if>
			<if test="address != null and address != ''">
				and `address` like
				CONCAT('%',#{address,jdbcType=VARCHAR},'%')
			</if>
			<if test="realName != null and realName != ''">
				and  `realName` like
				CONCAT('%',#{realName,jdbcType=VARCHAR},'%')
			</if>
			<if test="registeredCapital1 != null and registeredCapital1 != ''">
				and  `registeredCapital` &gt; #{registeredCapital1}
			</if>
			<if test="registeredCapital2 != null and registeredCapital2 != ''">
				and `registeredCapital` &lt; #{registeredCapital2}
			</if>
		</where>
	</select>
	<select id="findBusinessCmb" resultType="BusinessManagement" >
		SELECT id,companyName FROM companyinformation
		<where>
			<if test="companyName != null and companyName!=''">
				`companyName` like
				CONCAT('%',#{companyName,jdbcType=VARCHAR},'%')
			</if>
		</where>
	</select>
</mapper>